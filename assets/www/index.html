<!doctype html>
<html class="no-js ui-mobile-rendering" lang="en">
    <head>
        <title>JStock</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=0.5, user-scalable=1">
        <!--<meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9, target-densitydpi=medium-dpi, user-scalable=0" />-->
        <link rel="stylesheet" href="css/themes/default/jquery.mobile-1.4.0.min.css">
        <link rel="shortcut icon" href="../favicon.ico">
        <link rel="stylesheet" href="css/font.css">
        <link rel="stylesheet" href="css/jqm-demos.css">
        <script src="js/libs/require.js" data-main="js/mobile"></script>
        <link rel="stylesheet" href="css/index.css">

        <script type="text/javascript">
            function getDeviceDimention() {
                console.log("Device Dimention using PhoneGap");
                console.log("Width = " + window.innerWidth);
                console.log("Height = " + window.innerHeight);
            }
            getDeviceDimention();

            function toMoney(val) {
                var parts = val.toString().split(".");
                return parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ",") + (parts[1] ? "." + parts[1] : "");
            }

            String.prototype.ellipse =
                    function(n, useWordBoundary) {
                        var toLong = this.length > n,
                                s_ = toLong ? this.substr(0, n - 1) : this;
                        s_ = useWordBoundary && toLong ? s_.substr(0, s_.lastIndexOf(' ')) : s_;
                        return  toLong ? s_ + '&hellip;' : s_;
                    };

            function parseDate(input) {
                var parts = input.split('-');
                // new Date(year, month [, day [, hours[, minutes[, seconds[, ms]]]]])
                var date = new Date(parts[0], parts[1] - 1, parts[2]);
                return date.toString('dddd, MMMM ,yyyy').substring(4, 15);
            }
        </script>
    </head>
    <body>
        <div id="appview" data-role="page" data-title="JSE" class="jqm-demos" data-quicklinks="true">

            <div data-role="header" data-tap-toggle="false" class="jqm-header" data-position="fixed">
                <h2><a  title="Jamaica Stock Exchange"><img src="images/logo.png" alt="jQuery Mobile"></a></h2>
                <a  class="jqm-navmenu-link ui-btn ui-btn-icon-notext ui-corner-all ui-icon-bars ui-nodisc-icon ui-alt-icon ui-btn-left">Menu</a>
                <a  class="jqm-search-link ui-btn ui-btn-icon-notext ui-corner-all ui-icon-search ui-nodisc-icon ui-alt-icon ui-btn-right">Search</a>
            </div>

            <div style="display:none" id="index-navbar" data-role="navbar" class="app-navbar market-index">
                <ul>
                    <li><a class="ui-btn-active" id="main_index" href="">Main Index</a></li>
                    <li><a id="jse_select" href="">JSE Select</a></li>
                    <li><a id="all_jamaican" href="">All Jamaican</a></li>
                    <li><a id="cross_listed" href="">Cross Listed</a></li>
                </ul>
            </div>

            <div style="display:none" id="index-details-navbar" data-role="navbar" class="app-navbar market-index">
                <ul>
                    <li><a class="ui-btn-active" id="info">Information</a></li>
                    <li><a id="performance" >Performance</a></li>
                    <li><a id="history" >History</a></li>
                    <li><a id="composition" >Composition</a></li>
                </ul>
            </div>

            <div id="content-holder" role="main" class="ui-content jqm-content">

            </div><!-- /content -->

            <div data-role="navbar" data-position="fixed" data-iconpos="bottom" class="ui-footer ui-footer-fixed slideup ui-bar-inherit application-icon app-navbar">
                <ul>
                    <li><a href="#home" class="ui-btn-active" data-icon="report"></a></li>
                    <li><a href="#quote" data-icon="quote"></a></li>
                    <li><a href="#news" data-icon="news"></a></li>
                </ul>
            </div>

            <div data-role="panel" class="jqm-search-panel" data-position="right" data-display="overlay" data-theme="a">
                <div class="jqm-search">
                    <ul class="jqm-list" data-filter-placeholder="Search market" data-filter-reveal="true">
                        <li data-filtertext="introduction overview getting started"><a href="../intro/" data-ajax="false">Introduction</a></li>
                        <li data-filtertext="buttons button markup buttonmarkup method anchor link button element"><a href="../button-markup/" data-ajax="false">Buttons</a></li>
                        <li data-role="collapsible" data-collapsed-icon="carat-d" data-expanded-icon="carat-u" data-iconpos="right" data-inset="false">

                    </ul>
                </div>
            </div>
            <div id="main_head" data-role="panel" class="jqm-navmenu-panel" data-position="left" data-display="overlay" data-theme="a">
                <ul class="jqm-list ui-alt-icon ui-nodisc-icon">
                    <li data-filtertext="demos homepage" data-icon="home"><a href=".././">Main Market</a></li>
                    <li data-filtertext="introduction overview getting started"><a href="../intro/" data-ajax="false">Jnr. Market</a></li>
                    <li data-filtertext="buttons button markup buttonmarkup method anchor link button element"><a href="../button-markup/" data-ajax="false">Comb. Market</a></li>
                    <li data-filtertext="form button widget input button submit reset"><a href="../button/" data-ajax="false">US Market</a></li>
                    <li data-role="collapsible" data-collapsed-icon="carat-d" data-expanded-icon="carat-u" data-iconpos="right" data-inset="false">

                </ul>
            </div>
        </div>

        <div id="home" data-role="page" data-title="Home">
            <div class="ui-block-a" style="width:100%">
                <div class="jqm-block-content">
                    <div style="font-size:0.80em">
                        <h1 class="summary-heading-1">Daily Main Market Summary - <span class="market-date"></span></h1>
                    </div>
                    <p id="market-summart1"></p>
                </div>
            </div>

            <a style="margin: 0 0.5em 0.5em 0px;" href="#indexdetails" data-ajax="false" class="jqm-deeplink  "><span style="white-space: nowrap" class="app-link">View Index Details</span></a>

            <div class="ui-select app-content" style="display: none">
                <div id="select-choice-1-button" style="padding: .4em 1em;" class="ui-btn ui-icon-carat-d ui-btn-icon-right ui-corner-all ui-shadow">
                    <span class="form-element-text" >JSE Select: 1 Month</span>
                    <select name="select-choice-1" data-native-menu="false" id="select-choice-1">
                        <option value="standard">1 Week</option>
                        <option value="rush">1 Months</option>
                        <option value="express">3 Months</option>
                        <option value="overnight">6 Months</option>
                        <option value="overnight">1 Year</option>
                    </select>
                </div>
            </div>

            <div class="ui-block-a" style="width:100%">
                <div class="jqm-block-content">
                    <div >
                        <img id="graph-img" src="" alt="Graph" width="100%">
                    </div>
                    <div style="font-size:0.7em"></div>
                </div>
            </div>

            <div class="ui-block-a" style="width:100%">
                <div class="jqm-block-content">
                    <table class="market-details">
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="ui-block-a" style="width:100%;">
                <div class="jqm-block-content">
                    <div class="summary-heading-3 advancing">Stocks Advancing</div>
                    <table id="stock-adv" class="stock-t" summary="Stocks Advancing">
                        <thead>
                            <tr>
                                <th scope="col">Security</th>
                                <th class="alnright" scope="col">Volume</th>
                                <th class="alnright" scope="col">Close Price $</th>
                                <th class="alnright" scope="col">Change $</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="ui-block-a" style="width:100%;">
                <div class="jqm-block-content">
                    <div class="summary-heading-3 declining">Stocks Declining</div>
                    <table id="stock-dec" class="stock-t" summary="Stocks Declining">
                        <thead>
                            <tr>
                                <th scope="col">Security</th>
                                <th class="alnright" scope="col">Volume</th>
                                <th class="alnright" scope="col">Close Price $</th>
                                <th class="alnright" scope="col">Change $</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="ui-block-a" style="width:100%;">
                <div class="jqm-block-content">
                    <div class="summary-heading-3 traded">Stocks Trading firm</div>
                    <table id="stock-trd" class="stock-t" summary="Stocks Trading firm">
                        <thead>
                            <tr>
                                <th scope="col">Security</th>
                                <th class="alnright" scope="col">Volume</th>
                                <th class="alnright" scope="col">Close Price $</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="indexdetails" data-role="page" data-title="Colors">
            <div id="index-composition-tab" class="index-tabs">
                <div class="ui-block-a" style="width:100%;">
                    <div class="jqm-block-content">
                        <div class="summary-heading-3"><span class="act-index-name">Main Index</span> <br>Composition <span class="market-date"></span></div>
                        <table id="index-composition-table" class="stock-t">
                            <thead>
                                <tr>
                                    <th scope="col">Symbol</th>
                                    <th class="alnright" scope="col">Price</th>
                                    <th class="alnright" scope="col">Change ($)</th>
                                    <th class="alnright" scope="col">Change (%)</th>
                                    <th class="alnright" scope="col">Volume Traded</th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div id="index-history-tab" class="index-tabs">
                <div class="ui-block-a" style="width:100%;">
                    <div class="jqm-block-content">
                        <div class="summary-heading-3"><span class="act-index-name">Main Index History</span> </div>
                        <table id="index-history-table" class="stock-t">
                            <thead>
                                <tr>
                                    <th scope="col">Date</th>
                                    <th class="alnright" scope="col">Value</th>
                                    <th class="alnright" scope="col">Change ($)</th>
                                    <th class="alnright" scope="col">Change (%)</th>
                                    <th class="alnright" scope="col">Volume Traded</th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div id="index-information-tab" class="index-tabs">
                <div class="ui-block-a" style="width:100%;">
                    <div class="jqm-block-content" style="font-size: 0.8em">
                        <span class="act-index-name">Main Index</span> Information <span class="market-date"></span>
                    </div>
                </div>

                <div class="ui-block-a" style="width:100%;">
                    <div class="app-content">
                        <div data-demo-html="true">
                            <ul id="information-list" data-role="listview" data-inset="true" data-divider-theme="a" class="ui-listview ui-listview-inset ui-corner-all ui-shadow">
                                <li data-role="list-divider" role="heading" class="ui-li-divider ui-bar-a ui-first-child">Stock Information</li>
                                <li class=""><a  class="ui-btn text">Value Date<span id="value_date" class="figure"></span></a></li>
                                <li><a class="ui-btn text">Value<span id="value" class="figure"></span></a></li>
                                <li ><a  class="ui-btn text ">Change<span  id="change" class="figure value-dir"></span></a></li>
                                <li><a  class="ui-btn text">Change%<span id="change_perc" class="figure value-dir"></span></a></li>
                                <li data-role="list-divider" role="heading" class="ui-li-divider ui-bar-a" style="background: #FFF;"></li>
                                <li ><a  class="ui-btn text">Volume<span id="volume" class="figure"></span></a></li>
                                <li><a  class="ui-btn text">Market Capitalization<span id="market_capitalization" class="figure"></span></a></li>
                                <li ><a  class="ui-btn text">1969 Change<span id="change_1969" class="figure"></span></a></li>
                                <li data-role="list-divider" role="heading" class="ui-li-divider ui-bar-a" style="background: #FFF;"></li>
                                <li class=""><a  class="ui-btn text">Week to Date<span id="wtd" class="figure value-dir"></span></a></li>
                                <li class=""><a  class="ui-btn text">Month to Date<span id="mtd" class="figure value-dir"></span></a></li>
                                <li class=""><a  class="ui-btn text">Quarter to Date<span id="qtd" class="figure value-dir"></span></a></li>
                                <li class=""><a  class="ui-btn text">Year to Date<span id="ytd" class="figure value-dir"></span></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div id="index-performance-tab" class="index-tabs">
                <div class="ui-block-a" style="width:100%;">
                    <div class="jqm-block-content" style="font-size: 0.8em">
                        <span class="act-index-name">Main Index</span> Performance <span class="market-date"></span>
                    </div>
                </div>

                <div class="ui-block-a" style="width:100%;">
                    <div class="app-content">
                        <div data-demo-html="true">
                            <ul id="performance-list" data-role="listview" data-inset="true" data-divider-theme="a" class="ui-listview ui-listview-inset ui-corner-all ui-shadow">
                                <li data-role="list-divider" role="heading" class="ui-li-divider ui-bar-a ui-first-child">Stock Performance</li>
                                <li class="odd"><a  class="ui-btn text">Volume Traded <span id="vol" class="figure"></span></a></li>
                                <li><a  class="ui-btn text">Week to Date<span id="wtd" class="figure"></span></a></li>
                                <li class="odd"><a  class="ui-btn text">Month to Date<span id="mtd" class="figure"></span></a></li>
                                <li><a  class="ui-btn text">Quarter to Date<span id="qtd" class="figure">%</span></a></li>
                                <li class="odd"><a  class="ui-btn text">Year to Date<span id="ytd" class="figure"></span></a></li>
                                <li><a class="ui-btn text"><span id="change_name"></span><span id="change_value" class="figure"></span></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="quote" data-role="page" data-title="Quote">
            <ul data-role="listview" data-filter="true" data-filter-reveal="true" data-filter-placeholder="Search fruits..." data-inset="true">
                <li><a href="#">Apple</a></li>
                <li><a href="#">Banana</a></li>
                <li><a href="#">Cherry</a></li>
                <li><a href="#">Cranberry</a></li>
                <li><a href="#">Grape</a></li>
                <li><a href="#">Orange</a></li>
            </ul>
        </div>
        <div id="news" data-role="page" data-title="News">
            <div data-demo-html="true">
                <ul data-role="listview" data-inset="true" class="ui-listview ui-listview-inset ui-corner-all ui-shadow">
                    <li data-role="list-divider" role="heading" class="ui-li-divider ui-bar-inherit ui-li-has-count ui-first-child">Company News<span class="ui-li-count ui-body-inherit">2</span></li>
                    <li><a href="index.html" class="ui-btn ui-btn-icon-right ui-icon-carat-r">
                            <h2>Stephen Weber</h2>
                            <p><strong>You've been invited to a meeting at Filament Group in Boston, MA</strong></p>
                            <p>Hey Stephen, if you're available at 10am tomorrow, we've got a meeting with the jQuery team.</p>
                            <p class="ui-li-aside"><strong>6:24</strong>PM</p>
                        </a></li>
                    <li><a href="index.html" class="ui-btn ui-btn-icon-right ui-icon-carat-r">
                            <h2>jQuery Team</h2>
                            <p><strong>Boston Conference Planning</strong></p>
                            <p>In preparation for the upcoming conference in Boston, we need to start gathering a list of sponsors and speakers.</p>
                            <p class="ui-li-aside"><strong>9:18</strong>AM</p>
                        </a></li>
                    <li data-role="list-divider" role="heading" class="ui-li-divider ui-bar-inherit ui-li-has-count">Thursday, October 7, 2010 <span class="ui-li-count ui-body-inherit">1</span></li>
                    <li class="ui-last-child"><a href="index.html" class="ui-btn ui-btn-icon-right ui-icon-carat-r">
                            <h2>Avery Walker</h2>
                            <p><strong>Re: Dinner Tonight</strong></p>
                            <p>Sure, let's plan on meeting at Highland Kitchen at 8:00 tonight. Can't wait!</p>
                            <p class="ui-li-aside"><strong>4:48</strong>PM</p>
                        </a></li>
                </ul>
            </div>
        </div>
        <script id="stocks" type="text/template">
            <% _.each( stocks, function( stock, id ) { %>
            <tr>
            <td><%=stock.security.ellipse(25)%></td>
            <td class="alnright"><%=toMoney(stock.volume)%></td>
            <td class="alnright"><%=stock.close_price%></td>
            <td class="alnright"><%=stock.change%></td>
            </tr>
            <% }); %>
        </script>
        <script id="stocks-trd" type="text/template">
            <% _.each( stocks, function( stock, id ) { %>
            <tr>
            <td><%=stock.security.ellipse(25)%></td>
            <td class="alnright"><%=toMoney(stock.volume)%></td>
            <td class="alnright"><%=stock.close_price%></td>
            </tr>
            <% }); %>
        </script>
        <script id="market-summary" type="text/template">
            <span><b><%=summary['total']%>:</b></span>&nbsp;
            <span><%=summary['advanced']%>,</span>&nbsp;
            <span><%=summary['declined']%>,</span>&nbsp;
            <span><%=summary['traded']%></span>
        </script>

        <script id="market-details" type="text/template">
            <tr>
            <th scope="col">Volume: <i><%=toMoney(summary['vol'])%></i></th>
            <th scope="col">Value: <i><%=toMoney(summary['value'])%></i></th>
            <th scope="col">Change: <i><%=summary['change']%></i></i><img class="stock-direction" height="6px" width="6px" id="" src="images/<%=summary['change_dir']%>.png" alt="" width="100%"></th>
            <th scope="col">% Change: <i><%=summary['change_perc']%></i><img class="stock-direction" height="6px" width="6px" id="" src="images/<%=summary['change_perc_dir']%>.png"" alt="" width="100%"></th>
            </tr>
        </script>

        <script id="index-information" type="text/template">
            <tr>
            <td scope="col">Value Date</i></td>
            <td scope="col">Volume: <i><%=toMoney(0)%></i></td>
            </tr>
        </script>

        <script id="index-history-tmp" type="text/template">
            <% _.each( history, function( row, id ) { %>
            <tr>
            <td><%=row['date']%></td>
            <td class="alnright"><%=toMoney(row['value'])%></td>
            <td class="alnright"><%=toMoney(row['change'])%></td>
            <td class="alnright"><%=toMoney(row['change_perc'])%></td>
            <td class="alnright"><%=toMoney(row['volume_traded'])%></td>
            </tr>
            <% }); %>
        </script>

        <script id="index-composition-tmp" type="text/template">
            <% _.each( composition, function( row, id ) { %>
            <tr>
            <td><%=row['symbol']%></td>
            <td class="alnright"><%=toMoney(row['price'])%></td>
            <td class="alnright"><%=toMoney(row['change'])%></td>
            <td class="alnright"><%=toMoney(row['change_perc'])%></td>
            <td class="alnright"><%=toMoney(row['volume_traded'])%></td>
            </tr>
            <% }); %>
        </script>
    </body>
</html>
